<!DOCTYPE html>
<html lang="en">
<head>
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
  <title>@xjump</title>


  <script type="text/javascript" src="/slideout/1.0.1/slideout.min.js"></script>

  <link rel="stylesheet" href="/katex/0.10.1/katex.min.css">
  <script type="text/javascript" defer src="/katex/0.10.1/katex.min.js" ></script>
  <script type="text/javascript" defer src="/katex/0.10.1/contrib/mathtex-script-type.min.js" ></script>

  <script type="text/javascript" defer src="/katex/0.10.1/contrib/auto-render.min.js" onload="renderMathInElement(document.body);"></script>




  <link rel="stylesheet" href="/site.css">

  <link rel="stylesheet" href="/katex/0.10.1/katex.min.css"  >





</head>

<body>
  <div class="container">
    <div id="mobile-navbar" class="mobile-navbar">
      <div class="mobile-header-logo">
      <a href="/" class="logo">@xjump</a>
      </div>
      <div class="mobile-navbar-icon icon-out">
        <span></span>
        <span></span>
        <span></span>
      </div>
    </div>

    <nav id="mobile-menu" class="mobile-menu slideout-menu slideout-menu-left">
      <ul class="mobile-menu-list">
      
        <li class="mobile-menu-item">
        <a href="https:&#x2F;&#x2F;xjump.me">Home</a>
        </li>
      
        <li class="mobile-menu-item">
        <a href="https:&#x2F;&#x2F;xjump.me&#x2F;categories">Categories</a>
        </li>
      
        <li class="mobile-menu-item">
        <a href="https:&#x2F;&#x2F;xjump.me&#x2F;tags&#x2F;all">Archive</a>
        </li>
      
        <li class="mobile-menu-item">
        <a href="https:&#x2F;&#x2F;xjump.me&#x2F;rss.xml">RSS</a>
        </li>
      
        <li class="mobile-menu-item">
        <a href="https:&#x2F;&#x2F;xjump.me&#x2F;about">About</a>
        </li>
      
      </ul>
    </nav>

    <header id="header">
      <div class="logo"><a href="https:&#x2F;&#x2F;xjump.me">@xjump</a></div>
      <nav class="menu">
        <ul>
        
    <li><a href="https:&#x2F;&#x2F;xjump.me">Home </a></li>
        
    <li><a href="https:&#x2F;&#x2F;xjump.me&#x2F;categories">Categories </a></li>
        
    <li><a href="https:&#x2F;&#x2F;xjump.me&#x2F;tags&#x2F;all">Archive </a></li>
        
    <li><a href="https:&#x2F;&#x2F;xjump.me&#x2F;rss.xml">RSS </a></li>
        
    <li><a href="https:&#x2F;&#x2F;xjump.me&#x2F;about">About </a></li>
        
        </ul>
      </nav>
    </header>

    <main>
      <div class="content" id="mobile-panel">




<article class="post">

<header class="post__header">
  <h1 class="post__title"><a href="https:&#x2F;&#x2F;xjump.me&#x2F;20121221-python-tricks&#x2F;">Python小技巧</a></h1>
  <div class="post__meta">
    <span class="post__time">2012-12-21</span>

  </div>
</header>

 <div class="post-content"><p><strong>字符串分割：</strong></p>
<p>方法一：列表综合，适用任意长度序列</p>
<pre data-lang="python" style="background-color:#212121;color:#eeffff;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#89ddff;">[</span><span>s</span><span style="color:#89ddff;">[</span><span>i</span><span style="color:#89ddff;">:</span><span>i</span><span style="color:#89ddff;">+</span><span style="color:#f78c6c;">4</span><span style="color:#89ddff;">] </span><span style="font-style:italic;color:#c792ea;">for </span><span>i </span><span style="font-style:italic;color:#c792ea;">in </span><span style="color:#82aaff;">range</span><span style="color:#89ddff;">(</span><span style="color:#f78c6c;">0</span><span style="color:#89ddff;">, </span><span style="color:#82aaff;">len</span><span style="color:#89ddff;">(</span><span style="color:#82aaff;">seq</span><span style="color:#89ddff;">), </span><span style="color:#f78c6c;">4</span><span style="color:#89ddff;">)]
</span></code></pre>
<p>方法二：re 模块，适用字符串，总长度要求是片段长度的整数倍</p>
<pre data-lang="python" style="background-color:#212121;color:#eeffff;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#82aaff;">re</span><span style="color:#89ddff;">.</span><span style="color:#82aaff;">compile</span><span style="color:#89ddff;">(</span><span style="color:#82aaff;">r</span><span style="color:#89ddff;">&amp;&#39;</span><span style="color:#c3e88d;">.</span><span style="color:#89ddff;">{</span><span>4</span><span style="color:#89ddff;">}&#39;).</span><span style="color:#82aaff;">findall</span><span style="color:#89ddff;">(</span><span style="color:#82aaff;">s</span><span style="color:#89ddff;">)
</span></code></pre>
<span id="continue-reading"></span>
<p>方法三：struct 模块，适用字符串，总长度要求是片段长度的整数倍</p>
<pre data-lang="python" style="background-color:#212121;color:#eeffff;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#82aaff;">struct</span><span style="color:#89ddff;">.</span><span style="color:#82aaff;">unpack</span><span style="color:#89ddff;">(&amp;&#39;</span><span style="color:#c3e88d;">4s</span><span style="color:#89ddff;">&#39;*</span><span style="color:#82aaff;">len</span><span style="color:#89ddff;">(</span><span style="color:#82aaff;">s</span><span style="color:#89ddff;">)/</span><span style="color:#f78c6c;">4</span><span style="color:#89ddff;">, </span><span style="color:#82aaff;">s</span><span style="color:#89ddff;">)
</span></code></pre>
<p><strong>文件夹拷贝：</strong></p>
<pre data-lang="python" style="background-color:#212121;color:#eeffff;" class="language-python "><code class="language-python" data-lang="python"><span style="font-style:italic;color:#4a4a4a;">#!/usr/bin/env python
</span><span style="font-style:italic;color:#4a4a4a;"># encoding: utf-8
</span><span>
</span><span style="font-style:italic;color:#c792ea;">import </span><span>os
</span><span style="font-style:italic;color:#c792ea;">import </span><span>sys
</span><span style="font-style:italic;color:#c792ea;">import </span><span>shutil
</span><span>
</span><span>__doc__ </span><span style="color:#89ddff;">= &#39;&#39;&#39; </span><span style="color:#c3e88d;">copy all files from  directory to an destination ,
</span><span style="color:#c3e88d;">It recreate directory tree of src to dst and replace or create 
</span><span style="color:#c3e88d;">file in this directory.
</span><span style="color:#c3e88d;">If you have tree like this
</span><span style="color:#c3e88d;">src/A/dir/file
</span><span style="color:#c3e88d;">src/B/dir/sdir/file2
</span><span style="color:#c3e88d;">src/B/dir/file
</span><span style="color:#c3e88d;">and
</span><span style="color:#c3e88d;">then after script src dst 
</span><span style="color:#c3e88d;">dst/dir/file
</span><span style="color:#c3e88d;">dst/dir/sdir/file2 -&gt; this is the B file2 wich is taken
</span><span style="color:#c3e88d;">http://code.activestate.com/recipes/577493-recurse-copy-file/
</span><span style="color:#89ddff;">&#39;&#39;&#39;
</span><span>
</span><span style="font-style:italic;color:#c792ea;">def </span><span style="color:#82aaff;">copytree</span><span style="color:#89ddff;">(</span><span style="color:#f78c6c;">src</span><span style="color:#89ddff;">, </span><span style="color:#f78c6c;">dst</span><span style="color:#89ddff;">):
</span><span>  </span><span style="font-style:italic;color:#c792ea;">if </span><span style="color:#82aaff;">os</span><span style="color:#89ddff;">.</span><span style="color:#82aaff;">path</span><span style="color:#89ddff;">.</span><span style="color:#82aaff;">isdir</span><span style="color:#89ddff;">(</span><span style="color:#82aaff;">src</span><span style="color:#89ddff;">):
</span><span>    </span><span style="font-style:italic;color:#c792ea;">if </span><span style="color:#89ddff;">not </span><span style="color:#82aaff;">os</span><span style="color:#89ddff;">.</span><span style="color:#82aaff;">path</span><span style="color:#89ddff;">.</span><span style="color:#82aaff;">exists</span><span style="color:#89ddff;">(</span><span style="color:#82aaff;">dst</span><span style="color:#89ddff;">):
</span><span>      </span><span style="color:#82aaff;">os</span><span style="color:#89ddff;">.</span><span style="color:#82aaff;">makedirs</span><span style="color:#89ddff;">(</span><span style="color:#82aaff;">dst</span><span style="color:#89ddff;">)
</span><span>    </span><span style="font-style:italic;color:#c792ea;">for </span><span>name </span><span style="font-style:italic;color:#c792ea;">in </span><span style="color:#82aaff;">os</span><span style="color:#89ddff;">.</span><span style="color:#82aaff;">listdir</span><span style="color:#89ddff;">(</span><span style="color:#82aaff;">src</span><span style="color:#89ddff;">):
</span><span>      </span><span style="color:#82aaff;">copytree</span><span style="color:#89ddff;">(</span><span style="color:#82aaff;">os</span><span style="color:#89ddff;">.</span><span style="color:#82aaff;">path</span><span style="color:#89ddff;">.</span><span style="color:#82aaff;">join</span><span style="color:#89ddff;">(</span><span style="color:#82aaff;">src</span><span style="color:#89ddff;">, </span><span style="color:#82aaff;">name</span><span style="color:#89ddff;">),
</span><span style="color:#82aaff;">           os</span><span style="color:#89ddff;">.</span><span style="color:#82aaff;">path</span><span style="color:#89ddff;">.</span><span style="color:#82aaff;">join</span><span style="color:#89ddff;">(</span><span style="color:#82aaff;">dst</span><span style="color:#89ddff;">, </span><span style="color:#82aaff;">name</span><span style="color:#89ddff;">))
</span><span>  </span><span style="font-style:italic;color:#c792ea;">else</span><span style="color:#89ddff;">:
</span><span>    </span><span style="color:#82aaff;">shutil</span><span style="color:#89ddff;">.</span><span style="color:#82aaff;">copyfile</span><span style="color:#89ddff;">(</span><span style="color:#82aaff;">src</span><span style="color:#89ddff;">, </span><span style="color:#82aaff;">dst</span><span style="color:#89ddff;">)
</span><span>
</span><span style="font-style:italic;color:#c792ea;">def </span><span style="color:#82aaff;">main</span><span style="color:#89ddff;">(</span><span style="color:#f78c6c;">dsrc</span><span style="color:#89ddff;">, </span><span style="color:#f78c6c;">ddst</span><span style="color:#89ddff;">):
</span><span>  </span><span style="font-style:italic;color:#c792ea;">for </span><span>dirname </span><span style="font-style:italic;color:#c792ea;">in </span><span style="color:#82aaff;">os</span><span style="color:#89ddff;">.</span><span style="color:#82aaff;">listdir</span><span style="color:#89ddff;">(</span><span style="color:#82aaff;">dsrc</span><span style="color:#89ddff;">):
</span><span>    tocopy </span><span style="color:#89ddff;">= </span><span style="color:#82aaff;">os</span><span style="color:#89ddff;">.</span><span style="color:#82aaff;">path</span><span style="color:#89ddff;">.</span><span style="color:#82aaff;">join</span><span style="color:#89ddff;">(</span><span style="color:#82aaff;">dsrc</span><span style="color:#89ddff;">, </span><span style="color:#82aaff;">dirname</span><span style="color:#89ddff;">)
</span><span>    </span><span style="font-style:italic;color:#c792ea;">for </span><span>d </span><span style="font-style:italic;color:#c792ea;">in </span><span style="color:#82aaff;">os</span><span style="color:#89ddff;">.</span><span style="color:#82aaff;">listdir</span><span style="color:#89ddff;">(</span><span style="color:#82aaff;">tocopy</span><span style="color:#89ddff;">):
</span><span>      src </span><span style="color:#89ddff;">= </span><span style="color:#82aaff;">os</span><span style="color:#89ddff;">.</span><span style="color:#82aaff;">path</span><span style="color:#89ddff;">.</span><span style="color:#82aaff;">join</span><span style="color:#89ddff;">(</span><span style="color:#82aaff;">tocopy</span><span style="color:#89ddff;">,</span><span style="color:#82aaff;">d</span><span style="color:#89ddff;">)
</span><span>      dst </span><span style="color:#89ddff;">= </span><span style="color:#82aaff;">os</span><span style="color:#89ddff;">.</span><span style="color:#82aaff;">path</span><span style="color:#89ddff;">.</span><span style="color:#82aaff;">join</span><span style="color:#89ddff;">(</span><span style="color:#82aaff;">ddst</span><span style="color:#89ddff;">,</span><span style="color:#82aaff;">d</span><span style="color:#89ddff;">)
</span><span>      </span><span style="font-style:italic;color:#c792ea;">if </span><span style="color:#82aaff;">os</span><span style="color:#89ddff;">.</span><span style="color:#82aaff;">path</span><span style="color:#89ddff;">.</span><span style="color:#82aaff;">isdir</span><span style="color:#89ddff;">(</span><span style="color:#82aaff;">src</span><span style="color:#89ddff;">):
</span><span>        </span><span style="color:#82aaff;">copytree</span><span style="color:#89ddff;">(</span><span style="color:#82aaff;">src</span><span style="color:#89ddff;">, </span><span style="color:#82aaff;">dst</span><span style="color:#89ddff;">)
</span><span>
</span><span style="font-style:italic;color:#c792ea;">if </span><span>__name__ </span><span style="color:#89ddff;">== &#39;</span><span style="color:#c3e88d;">__main__</span><span style="color:#89ddff;">&#39;:
</span><span>  src </span><span style="color:#89ddff;">= </span><span>sys</span><span style="color:#89ddff;">.</span><span>argv</span><span style="color:#89ddff;">[</span><span style="color:#f78c6c;">1</span><span style="color:#89ddff;">]
</span><span>  dst </span><span style="color:#89ddff;">= </span><span>sys</span><span style="color:#89ddff;">.</span><span>argv</span><span style="color:#89ddff;">[</span><span style="color:#f78c6c;">2</span><span style="color:#89ddff;">]
</span><span>  </span><span style="color:#82aaff;">main</span><span style="color:#89ddff;">(</span><span style="color:#82aaff;">src</span><span style="color:#89ddff;">, </span><span style="color:#82aaff;">dst</span><span style="color:#89ddff;">)
</span><span>
</span></code></pre>
<p><strong>多行字符串：</strong></p>
<pre data-lang="python" style="background-color:#212121;color:#eeffff;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#89ddff;">&gt;&gt;&gt; </span><span>t </span><span style="color:#89ddff;">= (&#39;</span><span style="color:#c3e88d;">hello</span><span style="color:#89ddff;">&#39;
</span><span> </span><span style="color:#f78c6c;">... </span><span style="color:#89ddff;">&#39; &#39;
</span><span> </span><span style="color:#f78c6c;">... </span><span style="color:#89ddff;">&#39;</span><span style="color:#c3e88d;">world</span><span style="color:#89ddff;">&#39;)
</span><span style="color:#89ddff;">&gt;&gt;&gt; </span><span>t
</span><span style="color:#89ddff;">&#39;</span><span style="color:#c3e88d;">hello world</span><span style="color:#89ddff;">&#39;
</span></code></pre>
</div>


  <div class="post-footer">

  
    <div class="post-tags">
    
      <!-- <a href="https://xjump.me/tags/all/">#all</a> -->
    
    </div>
  
  
    <div class="post-nav">
    
      <a class="previous" href="https:&#x2F;&#x2F;xjump.me&#x2F;20121219-build-curl-on-windows&#x2F;">‹ Build cURL on windows</a>
    
    
      <a class="next" href="https:&#x2F;&#x2F;xjump.me&#x2F;20121227-vim-common-config&#x2F;">实用的Vim配置 ›</a>
    
    
    
    </div>
  

  </div>


</article>

      </div>
    </main>



  </div>


<script type="text/javascript" src="/even.js"></script>

</body></html>
